// ===================================================================
// Timer.h デルタタイム管理クラス
// ===================================================================
#pragma once
#include <chrono>

class Timer
{
private:
	// ===================================================================
	// 型エイリアス
	// ===================================================================
	using Clock = std::chrono::high_resolution_clock;
	using TimePoint = std::chrono::time_point<Clock>;
	using Duration = std::chrono::duration<float>;

	// ===================================================================
	// メンバ変数
	// ===================================================================
	TimePoint m_LastTime;		// 前フレームの時刻
	float m_DeltaTime;			// 前フレームからの経過時間
	float m_TotalTime;			// 総経過時間
	unsigned int m_FrameCount;	// 総フレーム数
	
	// FPS計測用
	float m_FpsTimer;				// FPS計測用タイマー
	unsigned int m_FpsFrameCount;	// FPS計測用フレームカウント
	float m_CurrentFps;				// 現在のFPS

	// スパイク対策
	static constexpr float MAX_DELTA_TIME = 0.033f; // 30FPS相当

public:
	// ===================================================================
	// コンストラクタ
	// ===================================================================
	Timer();

	// ===================================================================
	// 更新処理
	// ===================================================================
	void Update();

	// ===================================================================
	// デルタタイム取得
	// ===================================================================
	float GetDeltaTime() const { return m_DeltaTime; }

	// ===================================================================
	// 総経過時間取得
	// ===================================================================
	float GetTotalTime() const { return m_TotalTime; }

	// ===================================================================
	// FPS取得
	// ===================================================================
	float GetFPS() const { return m_CurrentFps; }

	// ===================================================================
	// 総フレーム数取得
	// ===================================================================
	unsigned int GetFrameCount() const { return m_FrameCount; }

	// ===================================================================
	// タイマーリセット
	// ===================================================================
	void Reset();
};
