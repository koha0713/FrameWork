// ===================================================================
// Component.h
// GameObject に追加できる機能の基底クラス
// ===================================================================
#pragma once
#include "SystemCommon.h"

// ===================================================================
// 前方宣言
// ===================================================================
class GameObject;

// ===================================================================
// Component 基底クラス
// すべてのコンポーネントはこのクラスを継承する
// ===================================================================
class Component
{
protected:
    // ===================================================================
    // メンバ変数
    // ===================================================================
    GameObject* m_pOwner = nullptr;  // このコンポーネントを所有するGameObject
    bool m_Enabled = true;            // コンポーネントが有効かどうか

public:
    // ===================================================================
    // コンストラクタ・デストラクタ
    // ===================================================================
    Component()
        : m_pOwner(nullptr)
        , m_Enabled(true){}

    virtual ~Component() = default;

    // ===================================================================
    // ライフサイクル (派生クラスでオーバーライド)
    // ===================================================================

    // 初期化処理 
    virtual void Init() {}

    // 更新処理
    virtual void Update() {}

    // 終了処理
    virtual void Uninit() {}

    // ===================================================================
    // オーナー (GameObject) の設定・取得
    // ===================================================================

    // オーナーを設定 (GameObject::AddComponent()で自動的に呼ばれるため手動設定は不要)
    void SetOwner(GameObject* owner) { m_pOwner = owner; }

    // オーナーを取得
    GameObject* GetOwner() { return m_pOwner; }
    const GameObject* GetOwner() const { return m_pOwner; }

    // ===================================================================
    // 有効・無効の制御
    // ===================================================================

    // コンポーネントを有効化
    void SetEnabled(bool enabled) { m_Enabled = enabled; }

    // コンポーネントが有効かどうか
    bool IsEnabled() const { return m_Enabled; }
};